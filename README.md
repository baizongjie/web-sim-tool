# web-sim-tool
http交互模拟仿真程序

## 项目概述

这是一个基于Web的HTTP交互模拟仿真工具，用于模拟Tomcat同步阻塞架构下的请求处理过程。该工具采用模块化设计，支持可视化仿真和实时性能指标监控。

## 主要功能

### 1. 输入模型配置
- **到达率模式**: 支持配置请求到达率（λ req/s），模拟开放系统
- **闭环并发模式**: 支持配置并发客户端数（N）和思考时间（Think Time），模拟闭环系统

### 2. 架构模拟
- **UP层**: 模拟上游处理节点，支持配置实例数、线程池大小、队列长度
- **DOWN层**: 模拟下游处理节点，支持配置实例数、线程池大小、队列长度
- **分流策略**: 支持Round-Robin、Least-Queue、Hash三种路由策略

### 3. 处理时间配置
- **CPU时间**: 配置UP和DOWN的CPU处理时间
- **IO时间**: 配置UP和DOWN的IO阻塞时间
- **超时设置**: 配置UP和DOWN的超时时间
- **失败率**: 配置UP和DOWN的处理失败率

### 4. 实时可视化
- **仿真动画**: 可视化请求在系统中的流动过程
- **性能图表**: 实时显示吞吐量、响应时间等指标变化
- **队列监控**: 显示UP和DOWN队列的实时长度
- **利用率监控**: 显示UP和DOWN节点的CPU利用率

### 5. 性能指标
- 总请求数、成功请求数、失败请求数
- 平均响应时间
- 系统吞吐量
- 队列长度统计
- 节点利用率统计

## 项目结构

```
web-sim/
├── index.html          # 主页面HTML
├── css/
│   └── style.css       # 样式文件
└── js/
    ├── config.js       # 配置文件
    ├── main.js         # 主入口文件
    ├── sim/
    │   ├── engine.js   # 仿真引擎
    │   ├── metrics.js  # 性能指标计算
    │   ├── models.js   # 数据模型
    │   └── routing.js  # 路由策略
    ├── render/
    │   ├── drawChart.js # 图表绘制
    │   ├── drawSim.js   # 仿真动画绘制
    │   └── layout.js    # 布局管理
    └── ui/
        ├── actions.js   # 用户操作处理
        └── controls.js  # UI控件管理
```

## 技术栈

- **前端**: HTML5, CSS3, JavaScript (ES6+)
- **可视化**: Canvas API
- **架构**: 模块化设计，无框架依赖

## 使用方法

1. 克隆项目到本地
2. 进入web-sim目录
3. 启动本地HTTP服务器：
   ```bash
   python3 -m http.server 8000
   ```
4. 在浏览器中访问 `http://localhost:8000`

## 运行仿真

1. 配置输入模型（到达率或并发数）
2. 设置UP和DOWN实例数及参数
3. 配置线程池、队列、处理时间等参数
4. 点击"开始仿真"按钮启动模拟
5. 观察实时动画和性能指标
6. 可随时停止、重置仿真

## 特性说明

- **模块化设计**: 代码按功能模块组织，便于维护和扩展
- **实时仿真**: 支持毫秒级时间精度的高性能仿真
- **可视化反馈**: 直观的动画和图表展示系统状态
- **参数调优**: 丰富的配置选项，支持性能调优分析
- **教育价值**: 适合用于理解同步阻塞架构的工作原理
